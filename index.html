<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkillSpark Hub</title>

<script src="https://sdk.minepi.com/pi-sdk.js"></script>

<style>
body{
  font-family: system-ui;
  margin:0;
  background:#f7f5fb;
}
header{
  text-align:center;
  padding:30px 16px;
  background:linear-gradient(135deg,#4A148C,#6A1B9A);
  color:white;
  border-radius:0 0 20px 20px;
}
.btn{
  background:white;
  color:#4A148C;
  border:none;
  padding:14px 22px;
  border-radius:25px;
  cursor:pointer;
  margin-top:10px;
}
.section{padding:20px 16px}
.card{
  background:white;
  border-radius:16px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 4px 10px rgba(0,0,0,.05);
}
.accordion{
  background:white;
  border-radius:16px;
  padding:14px;
  margin-bottom:12px;
  box-shadow:0 4px 10px rgba(0,0,0,.05);
  cursor:pointer;
}
.accordion-header{
  display:flex;
  justify-content:space-between;
}
.accordion-content{
  display:none;
  margin-top:10px;
}
.tag{
  display:inline-block;
  background:#EDE7F6;
  color:#4A148C;
  padding:6px 12px;
  border-radius:20px;
  font-size:12px;
  margin:4px;
}
footer{
  text-align:center;
  padding:16px;
  font-size:12px;
  opacity:.6;
}
.progress{
  color:#4A148C;
  font-size:13px;
}
</style>
</head>

<body>

<header>
<h1>ğŸ“š SkillSpark Hub</h1>
<p>ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙƒÙ„ ÙŠÙˆÙ… Ø¯Ø§Ø®Ù„ Pi Network</p>
<button class="btn" onclick="scrollToDash()">ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</button>
<div id="piNotice">â³ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Pi Browser...</div>
</header>

<section class="section" id="dashboard">
<h2>ğŸ“Š Ù„ÙˆØ­ØªÙƒ Ø§Ù„ÙŠÙˆÙ…</h2>
<div class="card" id="dashMsg">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...</div>
<div class="card" id="dashNext">...</div>
</section>

<section class="section">
<h2>ğŸ”® Ù…Ù‚ØªØ±Ø­ Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…</h2>
<div class="card" id="suggestionBox">ØªØ­Ù…ÙŠÙ„...</div>
<div class="progress" id="progressBox"></div>
</section>

<section class="section">
<h2>ğŸ“‚ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h2>
<div id="sections"></div>
</section>

<footer>Â© 2025 SkillSpark Hub â€“ Pi Network</footer>

<script>
/* ===== Pi Check ===== */
let tries=0;
const piNotice=document.getElementById("piNotice");
const piCheck=setInterval(()=>{
  tries++;
  if(window.Pi){
    clearInterval(piCheck);
    Pi.init({appName:"SkillSpark Hub"});
    piNotice.innerText="âœ… Pi Browser Ù…ØªØµÙ„";
  }
  if(tries>8){
    clearInterval(piCheck);
    piNotice.innerText="â„¹ï¸ Ø§Ù„ØªØµÙØ­ Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„";
  }
},300);

/* ===== Utils ===== */
function scrollToDash(){
  document.getElementById("dashboard").scrollIntoView({behavior:"smooth"});
}
function saveInterest(v){localStorage.setItem("interest",v)}
function markVisited(v){
  let a=JSON.parse(localStorage.getItem("visited")||"[]");
  if(!a.includes(v)){a.push(v);localStorage.setItem("visited",JSON.stringify(a))}
}

/* ===== Load Data ===== */
fetch("data.json").then(r=>r.json()).then(data=>{
const keys=Object.keys(data);

/* ===== Smart Daily Suggestion ===== */
const today=new Date().toDateString();
let suggested;
if(localStorage.getItem("suggestionDay")==today){
  suggested=localStorage.getItem("dailySuggestion");
}else{
  suggested=localStorage.getItem("interest")||keys[Math.floor(Math.random()*keys.length)];
  localStorage.setItem("dailySuggestion",suggested);
  localStorage.setItem("suggestionDay",today);
}
document.getElementById("suggestionBox").innerHTML=
  `<strong>${suggested}</strong><br>${data[suggested].Ø§Ù„ÙˆØµÙ||""}`;

/* ===== Dashboard ===== */
const visited=JSON.parse(localStorage.getItem("visited")||"[]");
document.getElementById("progressBox").innerText=
  `ğŸ“ˆ ØªÙ‚Ø¯Ù…Ùƒ ${visited.length} / ${keys.length}`;

document.getElementById("dashMsg").innerText=
  visited.length
  ? `ğŸ”¥ Ù…Ù…ØªØ§Ø²! Ø²ÙØ±Øª ${visited.length} Ø£Ù‚Ø³Ø§Ù…`
  : "ğŸ‘‹ Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø¨Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù‚Ø³Ù…";

document.getElementById("dashNext").innerText=
  localStorage.getItem("interest")
  ? `â¡ï¸ ÙƒÙ…Ù‘Ù„ ÙÙŠ ${localStorage.getItem("interest")}`
  : "ğŸŒ± Ø¬Ø±Ù‘Ø¨ Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯";

/* ===== Sections ===== */
const container=document.getElementById("sections");
keys.forEach(k=>{
  const acc=document.createElement("div");
  acc.className="accordion";
  acc.innerHTML=`
    <div class="accordion-header">
      <strong>${k}</strong><span>â¬‡ï¸</span>
    </div>
    <div class="accordion-content">${data[k].Ø§Ù„ÙˆØµÙ||""}</div>
  `;
  acc.onclick=()=>{
    saveInterest(k);
    markVisited(k);
    const c=acc.querySelector(".accordion-content");
    const open=c.style.display=="block";
    c.style.display=open?"none":"block";
    acc.querySelector("span").innerText=open?"â¬‡ï¸":"â¬†ï¸";
  };
  container.appendChild(acc);
});
});
</script>

</body>
</html>
